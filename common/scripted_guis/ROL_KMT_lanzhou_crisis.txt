scripted_gui = {
    ROL_KMT_lanzhou_crisis_AccessButton = {
		window_name = "ROL_KMT_lanzhou_crisis_AccessButton"
		context_type = player_context
		parent_window_token = politics_tab
		visible = {
			original_tag = KMT
			OR = {
			has_country_flag = ROL_KMT_lanzhou_crisis_start
			is_debug = yes
			}
		}
		effects = {
			ROL_KMT_lanzhou_crisis_OpenButton_click = {
				if = {
					limit = {
						NOT = {
							has_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
						}
					}
					set_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
				}
				else_if = {
					limit = {
						has_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
					}
					clr_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
				}
				set_country_flag = gui_alert_hidden
			}
		}
		triggers = {
			gui_alert_visible = {
				NOT = { has_country_flag = gui_alert_hidden }
			}
		}
	}
    
	ROL_KMT_lanzhou_crisis_GUI = {
		context_type = player_context
		window_name = "ROL_KMT_lanzhou_crisis_GUI"
		visible = {
			has_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
		}
		triggers = {
			ROL_KMT_lanzhou_loss_1_visible = { 
			has_country_flag = ROL_KMT_ma_end 
			}
			ROL_KMT_lanzhou_loss_2_visible = { 
			has_country_flag = ROL_KMT_cpc_end
			}
			ROL_KMT_lanzhou_crisis_infor_visible = { 
				OR = {
					NOT = {
					has_country_flag = ROL_KMT_ma_end
					has_country_flag = ROL_KMT_cpc_end
					}
				}
			}
			ROL_KMT_close_visible = { 
				OR = {
					NOT = {
					has_country_flag = ROL_KMT_ma_end
					has_country_flag = ROL_KMT_cpc_end
					}
				}
			}
		}
		effects = {
			ROL_KMT_close_click = {
				if = {
					limit = {
						has_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
					}
					clr_country_flag = ROL_KMT_lanzhou_crisis_GUI_Open
				}
			}
			
			ROL_KMT_first_area_button_click = {
				clr_country_flag = ROL_KMT_lanzhou_second_area
				clr_country_flag = ROL_KMT_lanzhou_third_area
				clr_country_flag = ROL_KMT_lanzhou_forth_area
				set_country_flag = ROL_KMT_lanzhou_first_area
			}
			
			ROL_KMT_second_area_button_click = {
				clr_country_flag = ROL_KMT_lanzhou_first_area
				clr_country_flag = ROL_KMT_lanzhou_third_area
				clr_country_flag = ROL_KMT_lanzhou_forth_area
				set_country_flag = ROL_KMT_lanzhou_second_area
			}
			
			ROL_KMT_third_area_button_click = {
				clr_country_flag = ROL_KMT_lanzhou_first_area
				clr_country_flag = ROL_KMT_lanzhou_second_area
				clr_country_flag = ROL_KMT_lanzhou_forth_area
				set_country_flag = ROL_KMT_lanzhou_third_area
			}
			
			ROL_KMT_forth_area_button_click = {
				clr_country_flag = ROL_KMT_lanzhou_first_area
				clr_country_flag = ROL_KMT_lanzhou_second_area
				clr_country_flag = ROL_KMT_lanzhou_third_area
				set_country_flag = ROL_KMT_lanzhou_forth_area
			}
			#########
			
			ROL_KMT_lanzhou_position_1_button_click = {
				ROL_KMT_lanzhou_button_1_onclick = yes
			}

			ROL_KMT_lanzhou_position_2_button_click = {
				ROL_KMT_lanzhou_button_2_onclick = yes
			}

			ROL_KMT_lanzhou_position_3_button_click = {
				ROL_KMT_lanzhou_button_3_onclick = yes
			}

			ROL_KMT_lanzhou_position_4_button_click = {
				ROL_KMT_lanzhou_button_4_onclick = yes
			}
			
			ROL_KMT_lanzhou_position_4_button_right_click = {
				ROL_KMT_lanzhou_button_4_rightclick = yes
			}

			ROL_KMT_lanzhou_position_5_button_click = {
				ROL_KMT_lanzhou_button_5_onclick = yes
			}

			ROL_KMT_lanzhou_position_6_button_click = {
				ROL_KMT_lanzhou_button_6_onclick = yes
			}

		}
		
		triggers = {
			ROL_KMT_lanzhou_outer_1_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_manpower_num > 30.1 }
			}
			ROL_KMT_lanzhou_outer_2_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_manpower_num < 30.1 }
			}
			ROL_KMT_lanzhou_outer_3_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_suppor_num > 45.1 }
			}
			ROL_KMT_lanzhou_outer_4_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_suppor_num < 45.1 }
			}
		}
		
		triggers = {
			ROL_KMT_lanzhou_clock_green_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_weely_1 > 60.1 }
			}
			ROL_KMT_lanzhou_clock_yellow_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_weely_1 < 60.1 }
				check_variable = { ROL_KMT_lanzhou_weely_1 > 30.1 }
			}
			ROL_KMT_lanzhou_clock_red_icon_visible = {
				check_variable = { ROL_KMT_lanzhou_weely_1 < 30.1 }
			}
		}
		
		triggers = {
			ROL_KMT_lanzhou_block_1_visible = {
				OR = {
					has_country_flag = ROL_KMT_1_button_use
					has_political_power < 0
				}
			}
			ROL_KMT_lanzhou_block_2_visible = {
				OR = {
					has_country_flag = ROL_KMT_2_button_use
					has_political_power < 0
				}
			}
			ROL_KMT_lanzhou_block_3_visible = {
				OR = {
					has_country_flag = ROL_KMT_3_button_use
					has_political_power < 0
				}
			}
			ROL_KMT_lanzhou_block_4_visible = {
				OR = {
					has_country_flag = ROL_KMT_4_button_use
					has_political_power < 0
				}
			}
			ROL_KMT_lanzhou_block_5_visible = {
				OR = {
					has_country_flag = ROL_KMT_5_button_use
					has_political_power < 0
				}
			}
			ROL_KMT_lanzhou_block_6_visible = {
				OR = {
					has_country_flag = ROL_KMT_6_button_use
					has_political_power < 0
				}
			}
			#######
			ROL_KMT_cpc_end_icon_visible = {
				has_country_flag = ROL_KMT_lanzhou_cpc_end
			}
		}
		
		triggers = {
			########
			ROL_KMT_lock_first_area_visible = {
				check_variable = { ROL_KMT_lanzhou_ruin_num > 70 }
			}
			
			ROL_KMT_lock_second_area_visible = {
				check_variable = { ROL_KMT_lanzhou_ruin_2_num > 70 }
			}
			
			ROL_KMT_lock_third_area_visible = {
				check_variable = { ROL_KMT_lanzhou_ruin_3_num > 70 }
			}
			
			ROL_KMT_lock_forth_area_visible = {
				check_variable = { ROL_KMT_lanzhou_ruin_4_num > 70 }
			}
		}
		
		properties = {
			ROL_KMT_lanzhou_manpower = {
				frame = ROL_KMT_lanzhou_manpower_num
			}
			
			ROL_KMT_lanzhou_suppor = {
				frame = ROL_KMT_lanzhou_suppor_num
			}
			######
			ROL_KMT_lanzhou_control = {
				frame = ROL_KMT_lanzhou_control_num
			}
			
			ROL_KMT_lanzhou_control_2 = {
				frame = ROL_KMT_lanzhou_control_2_num
			}
			
			ROL_KMT_lanzhou_control_3 = {
				frame = ROL_KMT_lanzhou_control_3_num
			}
			
			ROL_KMT_lanzhou_control_4 = {
				frame = ROL_KMT_lanzhou_control_4_num
			}
			######
			ROL_KMT_lanzhou_ruin = {
				frame = ROL_KMT_lanzhou_ruin_num
			}
			
			ROL_KMT_lanzhou_ruin_2 = {
				frame = ROL_KMT_lanzhou_ruin_2_num
			}
			
			ROL_KMT_lanzhou_ruin_3 = {
				frame = ROL_KMT_lanzhou_ruin_3_num
			}
			
			ROL_KMT_lanzhou_ruin_4 = {
				frame = ROL_KMT_lanzhou_ruin_4_num
			}
			######
			ROL_KMT_lanzhou_position_1_button = {
				frame = ROL_KMT_lanzhou_stage
			}
			ROL_KMT_lanzhou_position_2_button = {
				frame = ROL_KMT_lanzhou_stage
			}
			ROL_KMT_lanzhou_position_3_button = {
				frame = ROL_KMT_lanzhou_stage
			}
			ROL_KMT_lanzhou_position_4_button = {
				frame = ROL_KMT_lanzhou_stage
			}
			ROL_KMT_lanzhou_position_5_button = {
				frame = ROL_KMT_lanzhou_stage
			}
			ROL_KMT_lanzhou_position_6_button = {
				frame = ROL_KMT_lanzhou_stage
			}
		}
	}
}	